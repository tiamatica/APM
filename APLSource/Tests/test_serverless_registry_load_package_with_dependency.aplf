 test_serverless_registry_load_package_with_dependency←{
     apm flags←⍺ ⍵
     ⍝ test loading PackageA that depends on packageB
     dir←getTempDir ⍬
     rc registry←apm CreateTestRegistry dir
     assert rc=0:
     uri←apm.PathToUri registry
     rc msg cfg←apm.AddRegistry'test'uri
     assert rc=0:

     rc msg cfg←apm.Load'GroupX-Tool-v2.0.0'
     assert 0=rc:
     ns←⍎cfg.nspath
     assert('Math' 'Tool')≡ns.⎕NL-⍳10:
     assert 42≡ns.Tool.inc 41:

     _←⎕EX⍕ns
     rc msg cfg←apm.RemoveRegistry'test'
     _←3 ⎕NDELETE dir
     0
 }
